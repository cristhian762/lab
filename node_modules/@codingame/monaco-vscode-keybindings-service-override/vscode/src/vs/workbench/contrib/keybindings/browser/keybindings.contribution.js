import { localize2WithPath } from 'vscode/vscode/vs/nls';
import { registerAction2, Action2 } from 'vscode/vscode/vs/platform/actions/common/actions';
import { IKeybindingService } from 'vscode/vscode/vs/platform/keybinding/common/keybinding';
import { Categories } from 'vscode/vscode/vs/platform/action/common/actionCommonCategories';
import { ICommandService } from 'vscode/vscode/vs/platform/commands/common/commands';
import { showWindowLogActionId } from 'vscode/vscode/vs/workbench/services/log/common/logConstants';

class ToggleKeybindingsLogAction extends Action2 {
    constructor() {
        super({
            id: 'workbench.action.toggleKeybindingsLog',
            title: ( localize2WithPath(
                'vs/workbench/contrib/keybindings/browser/keybindings.contribution',
                'toggleKeybindingsLog',
                "Toggle Keyboard Shortcuts Troubleshooting"
            )),
            category: Categories.Developer,
            f1: true
        });
    }
    run(accessor) {
        const logging = accessor.get(IKeybindingService).toggleLogging();
        if (logging) {
            const commandService = accessor.get(ICommandService);
            commandService.executeCommand(showWindowLogActionId);
        }
    }
}
registerAction2(ToggleKeybindingsLogAction);
